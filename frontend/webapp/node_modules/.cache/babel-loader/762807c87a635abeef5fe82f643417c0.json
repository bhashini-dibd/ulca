{"ast":null,"code":"import React, { useEffect, useLayoutEffect, forwardRef, useState, useRef, useImperativeHandle } from 'react';\nimport ReactDOM from 'react-dom';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar useOnEscape = function useOnEscape(handler, active) {\n  if (active === void 0) {\n    active = true;\n  }\n\n  useEffect(function () {\n    if (!active) return;\n\n    var listener = function listener(event) {\n      // check if key is an Escape\n      if (event.key === 'Escape') handler();\n    };\n\n    document.addEventListener('keyup', listener);\n    return function () {\n      if (!active) return;\n      document.removeEventListener('keyup', listener);\n    };\n  }, [handler, active]);\n};\n\nvar useRepositionOnResize = function useRepositionOnResize(handler, active) {\n  if (active === void 0) {\n    active = true;\n  }\n\n  useEffect(function () {\n    if (!active) return;\n\n    var listener = function listener() {\n      handler();\n    };\n\n    window.addEventListener('resize', listener);\n    return function () {\n      if (!active) return;\n      window.removeEventListener('resize', listener);\n    };\n  }, [handler, active]);\n};\n\nvar useOnClickOutside = function useOnClickOutside(ref, handler, active) {\n  if (active === void 0) {\n    active = true;\n  }\n\n  useEffect(function () {\n    if (!active) return;\n\n    var listener = function listener(event) {\n      // Do nothing if clicking ref's element or descendent elements\n      var refs = Array.isArray(ref) ? ref : [ref];\n      var contains = false;\n      refs.forEach(function (r) {\n        if (!r.current || r.current.contains(event.target)) {\n          contains = true;\n          return;\n        }\n      });\n      event.stopPropagation();\n      if (!contains) handler();\n    };\n\n    document.addEventListener('mousedown', listener);\n    document.addEventListener('touchstart', listener);\n    return function () {\n      if (!active) return;\n      document.removeEventListener('mousedown', listener);\n      document.removeEventListener('touchstart', listener);\n    };\n  }, [ref, handler, active]);\n}; // Make sure that user is not able TAB out of the Modal content on Open\n\n\nvar useTabbing = function useTabbing(contentRef, active) {\n  if (active === void 0) {\n    active = true;\n  }\n\n  useEffect(function () {\n    if (!active) return;\n\n    var listener = function listener(event) {\n      // check if key is an Tab\n      if (event.keyCode === 9) {\n        var _contentRef$current;\n\n        var els = contentRef === null || contentRef === void 0 ? void 0 : (_contentRef$current = contentRef.current) === null || _contentRef$current === void 0 ? void 0 : _contentRef$current.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex=\"0\"]');\n        var focusableEls = Array.prototype.slice.call(els);\n\n        if (focusableEls.length === 1) {\n          event.preventDefault();\n          return;\n        }\n\n        var firstFocusableEl = focusableEls[0];\n        var lastFocusableEl = focusableEls[focusableEls.length - 1];\n\n        if (event.shiftKey && document.activeElement === firstFocusableEl) {\n          event.preventDefault();\n          lastFocusableEl.focus();\n        } else if (document.activeElement === lastFocusableEl) {\n          event.preventDefault();\n          firstFocusableEl.focus();\n        }\n      }\n    };\n\n    document.addEventListener('keydown', listener);\n    return function () {\n      if (!active) return;\n      document.removeEventListener('keydown', listener);\n    };\n  }, [contentRef, active]);\n};\n\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect;\nvar Style = {\n  popupContent: {\n    tooltip: {\n      position: 'absolute',\n      zIndex: 999\n    },\n    modal: {\n      position: 'relative',\n      margin: 'auto'\n    }\n  },\n  popupArrow: {\n    height: '8px',\n    width: '16px',\n    position: 'absolute',\n    background: 'transparent',\n    color: '#FFF',\n    zIndex: -1\n  },\n  overlay: {\n    tooltip: {\n      position: 'fixed',\n      top: '0',\n      bottom: '0',\n      left: '0',\n      right: '0',\n      zIndex: 999\n    },\n    modal: {\n      position: 'fixed',\n      top: '0',\n      bottom: '0',\n      left: '0',\n      right: '0',\n      display: 'flex',\n      zIndex: 999\n    }\n  }\n};\nvar POSITION_TYPES = ['top left', 'top center', 'top right', 'right top', 'right center', 'right bottom', 'bottom left', 'bottom center', 'bottom right', 'left top', 'left center', 'left bottom'];\n\nvar getCoordinatesForPosition = function getCoordinatesForPosition(triggerBounding, ContentBounding, position, //PopupPosition | PopupPosition[],\narrow, _ref) {\n  var offsetX = _ref.offsetX,\n      offsetY = _ref.offsetY;\n  var margin = arrow ? 8 : 0;\n  var args = position.split(' '); // the step N 1 : center the popup content => ok\n\n  var CenterTop = triggerBounding.top + triggerBounding.height / 2;\n  var CenterLeft = triggerBounding.left + triggerBounding.width / 2;\n  var height = ContentBounding.height,\n      width = ContentBounding.width;\n  var top = CenterTop - height / 2;\n  var left = CenterLeft - width / 2;\n  var transform = '';\n  var arrowTop = '0%';\n  var arrowLeft = '0%'; // the  step N 2 : => ok\n\n  switch (args[0]) {\n    case 'top':\n      top -= height / 2 + triggerBounding.height / 2 + margin;\n      transform = \"rotate(180deg)  translateX(50%)\";\n      arrowTop = '100%';\n      arrowLeft = '50%';\n      break;\n\n    case 'bottom':\n      top += height / 2 + triggerBounding.height / 2 + margin;\n      transform = \"rotate(0deg) translateY(-100%) translateX(-50%)\";\n      arrowLeft = '50%';\n      break;\n\n    case 'left':\n      left -= width / 2 + triggerBounding.width / 2 + margin;\n      transform = \" rotate(90deg)  translateY(50%) translateX(-25%)\";\n      arrowLeft = '100%';\n      arrowTop = '50%';\n      break;\n\n    case 'right':\n      left += width / 2 + triggerBounding.width / 2 + margin;\n      transform = \"rotate(-90deg)  translateY(-150%) translateX(25%)\";\n      arrowTop = '50%';\n      break;\n  }\n\n  switch (args[1]) {\n    case 'top':\n      top = triggerBounding.top;\n      arrowTop = triggerBounding.height / 2 + \"px\";\n      break;\n\n    case 'bottom':\n      top = triggerBounding.top - height + triggerBounding.height;\n      arrowTop = height - triggerBounding.height / 2 + \"px\";\n      break;\n\n    case 'left':\n      left = triggerBounding.left;\n      arrowLeft = triggerBounding.width / 2 + \"px\";\n      break;\n\n    case 'right':\n      left = triggerBounding.left - width + triggerBounding.width;\n      arrowLeft = width - triggerBounding.width / 2 + \"px\";\n      break;\n  }\n\n  top = args[0] === 'top' ? top - offsetY : top + offsetY;\n  left = args[0] === 'left' ? left - offsetX : left + offsetX;\n  return {\n    top: top,\n    left: left,\n    transform: transform,\n    arrowLeft: arrowLeft,\n    arrowTop: arrowTop\n  };\n};\n\nvar getTooltipBoundary = function getTooltipBoundary(keepTooltipInside) {\n  // add viewport\n  var boundingBox = {\n    top: 0,\n    left: 0,\n\n    /* eslint-disable-next-line no-undef */\n    width: window.innerWidth,\n\n    /* eslint-disable-next-line no-undef */\n    height: window.innerHeight\n  };\n\n  if (typeof keepTooltipInside === 'string') {\n    /* eslint-disable-next-line no-undef */\n    var selector = document.querySelector(keepTooltipInside);\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (selector === null) throw new Error(keepTooltipInside + \" selector does not exist : keepTooltipInside must be a valid html selector 'class' or 'Id'  or a boolean value\");\n    }\n\n    if (selector !== null) boundingBox = selector.getBoundingClientRect();\n  }\n\n  return boundingBox;\n};\n\nvar calculatePosition = function calculatePosition(triggerBounding, ContentBounding, position, arrow, _ref2, keepTooltipInside) {\n  var offsetX = _ref2.offsetX,\n      offsetY = _ref2.offsetY;\n  var bestCoords = {\n    arrowLeft: '0%',\n    arrowTop: '0%',\n    left: 0,\n    top: 0,\n    transform: 'rotate(135deg)'\n  };\n  var i = 0;\n  var wrapperBox = getTooltipBoundary(keepTooltipInside);\n  var positions = Array.isArray(position) ? position : [position]; // keepTooltipInside would be activated if the  keepTooltipInside exist or the position is Array\n\n  if (keepTooltipInside || Array.isArray(position)) positions = [].concat(positions, POSITION_TYPES); // add viewPort for WarpperBox\n  // wrapperBox.top = wrapperBox.top + window.scrollY;\n  // wrapperBox.left = wrapperBox.left + window.scrollX;\n\n  while (i < positions.length) {\n    bestCoords = getCoordinatesForPosition(triggerBounding, ContentBounding, positions[i], arrow, {\n      offsetX: offsetX,\n      offsetY: offsetY\n    });\n    var contentBox = {\n      top: bestCoords.top,\n      left: bestCoords.left,\n      width: ContentBounding.width,\n      height: ContentBounding.height\n    };\n\n    if (contentBox.top <= wrapperBox.top || contentBox.left <= wrapperBox.left || contentBox.top + contentBox.height >= wrapperBox.top + wrapperBox.height || contentBox.left + contentBox.width >= wrapperBox.left + wrapperBox.width) {\n      i++;\n    } else {\n      break;\n    }\n  }\n\n  return bestCoords;\n};\n\nvar popupIdCounter = 0;\n\nvar getRootPopup = function getRootPopup() {\n  var PopupRoot = document.getElementById('popup-root');\n\n  if (PopupRoot === null) {\n    PopupRoot = document.createElement('div');\n    PopupRoot.setAttribute('id', 'popup-root');\n    document.body.appendChild(PopupRoot);\n  }\n\n  return PopupRoot;\n};\n\nvar Popup = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var _ref$trigger = _ref.trigger,\n      trigger = _ref$trigger === void 0 ? null : _ref$trigger,\n      _ref$onOpen = _ref.onOpen,\n      onOpen = _ref$onOpen === void 0 ? function () {} : _ref$onOpen,\n      _ref$onClose = _ref.onClose,\n      onClose = _ref$onClose === void 0 ? function () {} : _ref$onClose,\n      _ref$defaultOpen = _ref.defaultOpen,\n      defaultOpen = _ref$defaultOpen === void 0 ? false : _ref$defaultOpen,\n      _ref$open = _ref.open,\n      open = _ref$open === void 0 ? undefined : _ref$open,\n      _ref$disabled = _ref.disabled,\n      disabled = _ref$disabled === void 0 ? false : _ref$disabled,\n      _ref$nested = _ref.nested,\n      nested = _ref$nested === void 0 ? false : _ref$nested,\n      _ref$closeOnDocumentC = _ref.closeOnDocumentClick,\n      closeOnDocumentClick = _ref$closeOnDocumentC === void 0 ? true : _ref$closeOnDocumentC,\n      _ref$repositionOnResi = _ref.repositionOnResize,\n      repositionOnResize = _ref$repositionOnResi === void 0 ? true : _ref$repositionOnResi,\n      _ref$closeOnEscape = _ref.closeOnEscape,\n      closeOnEscape = _ref$closeOnEscape === void 0 ? true : _ref$closeOnEscape,\n      _ref$on = _ref.on,\n      on = _ref$on === void 0 ? ['click'] : _ref$on,\n      _ref$contentStyle = _ref.contentStyle,\n      contentStyle = _ref$contentStyle === void 0 ? {} : _ref$contentStyle,\n      _ref$arrowStyle = _ref.arrowStyle,\n      arrowStyle = _ref$arrowStyle === void 0 ? {} : _ref$arrowStyle,\n      _ref$overlayStyle = _ref.overlayStyle,\n      overlayStyle = _ref$overlayStyle === void 0 ? {} : _ref$overlayStyle,\n      _ref$className = _ref.className,\n      className = _ref$className === void 0 ? '' : _ref$className,\n      _ref$position = _ref.position,\n      position = _ref$position === void 0 ? 'bottom center' : _ref$position,\n      _ref$modal = _ref.modal,\n      modal = _ref$modal === void 0 ? false : _ref$modal,\n      _ref$lockScroll = _ref.lockScroll,\n      lockScroll = _ref$lockScroll === void 0 ? false : _ref$lockScroll,\n      _ref$arrow = _ref.arrow,\n      arrow = _ref$arrow === void 0 ? true : _ref$arrow,\n      _ref$offsetX = _ref.offsetX,\n      offsetX = _ref$offsetX === void 0 ? 0 : _ref$offsetX,\n      _ref$offsetY = _ref.offsetY,\n      offsetY = _ref$offsetY === void 0 ? 0 : _ref$offsetY,\n      _ref$mouseEnterDelay = _ref.mouseEnterDelay,\n      mouseEnterDelay = _ref$mouseEnterDelay === void 0 ? 100 : _ref$mouseEnterDelay,\n      _ref$mouseLeaveDelay = _ref.mouseLeaveDelay,\n      mouseLeaveDelay = _ref$mouseLeaveDelay === void 0 ? 100 : _ref$mouseLeaveDelay,\n      _ref$keepTooltipInsid = _ref.keepTooltipInside,\n      keepTooltipInside = _ref$keepTooltipInsid === void 0 ? false : _ref$keepTooltipInsid,\n      children = _ref.children;\n\n  var _useState = useState(open || defaultOpen),\n      isOpen = _useState[0],\n      setIsOpen = _useState[1];\n\n  var triggerRef = useRef(null);\n  var contentRef = useRef(null);\n  var arrowRef = useRef(null);\n  var focusedElBeforeOpen = useRef(null);\n  var popupId = useRef(\"popup-\" + ++popupIdCounter);\n  var isModal = modal ? true : !trigger;\n  var timeOut = useRef(0);\n  useIsomorphicLayoutEffect(function () {\n    if (isOpen) {\n      focusedElBeforeOpen.current = document.activeElement;\n      setPosition();\n      focusContentOnOpen(); // for accessibility\n\n      lockScrolll();\n    } else {\n      resetScroll();\n    }\n\n    return function () {\n      clearTimeout(timeOut.current);\n    };\n  }, [isOpen]); // for uncontrolled popup we need to sync isOpen with open prop\n\n  useEffect(function () {\n    if (typeof open === 'boolean') {\n      if (open) openPopup();else closePopup();\n    }\n  }, [open, disabled]);\n\n  var openPopup = function openPopup() {\n    if (isOpen || disabled) return;\n    setIsOpen(true);\n    setTimeout(onOpen, 0);\n  };\n\n  var closePopup = function closePopup() {\n    if (!isOpen || disabled) return;\n    setIsOpen(false);\n    if (isModal) focusedElBeforeOpen.current.focus();\n    setTimeout(onClose, 0);\n  };\n\n  var togglePopup = function togglePopup(event) {\n    event === null || event === void 0 ? void 0 : event.stopPropagation();\n    if (!isOpen) openPopup();else closePopup();\n  };\n\n  var onMouseEnter = function onMouseEnter() {\n    clearTimeout(timeOut.current);\n    timeOut.current = setTimeout(openPopup, mouseEnterDelay);\n  };\n\n  var onContextMenu = function onContextMenu(event) {\n    event === null || event === void 0 ? void 0 : event.preventDefault();\n    togglePopup();\n  };\n\n  var onMouseLeave = function onMouseLeave() {\n    clearTimeout(timeOut.current);\n    timeOut.current = setTimeout(closePopup, mouseLeaveDelay);\n  };\n\n  var lockScrolll = function lockScrolll() {\n    if (isModal && lockScroll) document.getElementsByTagName('body')[0].style.overflow = 'hidden'; // migrate to document.body\n  };\n\n  var resetScroll = function resetScroll() {\n    if (isModal && lockScroll) document.getElementsByTagName('body')[0].style.overflow = 'auto';\n  };\n\n  var focusContentOnOpen = function focusContentOnOpen() {\n    var _contentRef$current;\n\n    var focusableEls = contentRef === null || contentRef === void 0 ? void 0 : (_contentRef$current = contentRef.current) === null || _contentRef$current === void 0 ? void 0 : _contentRef$current.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex=\"0\"]');\n    var firstEl = Array.prototype.slice.call(focusableEls)[0];\n    firstEl === null || firstEl === void 0 ? void 0 : firstEl.focus();\n  };\n\n  useImperativeHandle(ref, function () {\n    return {\n      open: function open() {\n        openPopup();\n      },\n      close: function close() {\n        closePopup();\n      },\n      toggle: function toggle() {\n        togglePopup();\n      }\n    };\n  }); // set Position\n\n  var setPosition = function setPosition() {\n    if (isModal || !isOpen) return;\n    if (!(triggerRef === null || triggerRef === void 0 ? void 0 : triggerRef.current) || !(triggerRef === null || triggerRef === void 0 ? void 0 : triggerRef.current) || !(contentRef === null || contentRef === void 0 ? void 0 : contentRef.current)) return; /// show error as one of ref is undefined\n\n    var trigger = triggerRef.current.getBoundingClientRect();\n    var content = contentRef.current.getBoundingClientRect();\n    var cords = calculatePosition(trigger, content, position, arrow, {\n      offsetX: offsetX,\n      offsetY: offsetY\n    }, keepTooltipInside);\n    contentRef.current.style.top = cords.top + window.scrollY + \"px\";\n    contentRef.current.style.left = cords.left + window.scrollX + \"px\";\n\n    if (arrow && !!arrowRef.current) {\n      var _arrowStyle$top, _arrowStyle$left;\n\n      arrowRef.current.style.transform = cords.transform;\n      arrowRef.current.style.setProperty('-ms-transform', cords.transform);\n      arrowRef.current.style.setProperty('-webkit-transform', cords.transform);\n      arrowRef.current.style.top = ((_arrowStyle$top = arrowStyle.top) === null || _arrowStyle$top === void 0 ? void 0 : _arrowStyle$top.toString()) || cords.arrowTop;\n      arrowRef.current.style.left = ((_arrowStyle$left = arrowStyle.left) === null || _arrowStyle$left === void 0 ? void 0 : _arrowStyle$left.toString()) || cords.arrowLeft;\n    }\n  }; // hooks\n\n\n  useOnEscape(closePopup, closeOnEscape); // can be optimized if we disabled for hover\n\n  useTabbing(contentRef, isOpen && isModal);\n  useRepositionOnResize(setPosition, repositionOnResize);\n  useOnClickOutside(!!trigger ? [contentRef, triggerRef] : [contentRef], closePopup, closeOnDocumentClick && !nested); // we need to add a ne\n  // render the trigger element and add events\n\n  var renderTrigger = function renderTrigger() {\n    var triggerProps = {\n      key: 'T',\n      ref: triggerRef,\n      'aria-describedby': popupId.current\n    };\n    var onAsArray = Array.isArray(on) ? on : [on];\n\n    for (var i = 0, len = onAsArray.length; i < len; i++) {\n      switch (onAsArray[i]) {\n        case 'click':\n          triggerProps.onClick = togglePopup;\n          break;\n\n        case 'right-click':\n          triggerProps.onContextMenu = onContextMenu;\n          break;\n\n        case 'hover':\n          triggerProps.onMouseEnter = onMouseEnter;\n          triggerProps.onMouseLeave = onMouseLeave;\n          break;\n\n        case 'focus':\n          triggerProps.onFocus = onMouseEnter;\n          triggerProps.onBlur = onMouseLeave;\n          break;\n      }\n    }\n\n    if (typeof trigger === 'function') {\n      var comp = trigger(isOpen);\n      return !!trigger && React.cloneElement(comp, triggerProps);\n    }\n\n    return !!trigger && React.cloneElement(trigger, triggerProps);\n  };\n\n  var addWarperAction = function addWarperAction() {\n    var popupContentStyle = isModal ? Style.popupContent.modal : Style.popupContent.tooltip;\n    var childrenElementProps = {\n      className: \"popup-content \" + (className !== '' ? className.split(' ').map(function (c) {\n        return c + \"-content\";\n      }).join(' ') : ''),\n      style: _extends({}, popupContentStyle, contentStyle, {\n        pointerEvents: 'auto'\n      }),\n      ref: contentRef,\n      onClick: function onClick(e) {\n        e.stopPropagation();\n      }\n    };\n\n    if (!modal && on.indexOf('hover') >= 0) {\n      childrenElementProps.onMouseEnter = onMouseEnter;\n      childrenElementProps.onMouseLeave = onMouseLeave;\n    }\n\n    return childrenElementProps;\n  };\n\n  var renderContent = function renderContent() {\n    return React.createElement(\"div\", Object.assign({}, addWarperAction(), {\n      key: \"C\",\n      role: isModal ? 'dialog' : 'tooltip',\n      id: popupId.current\n    }), arrow && !isModal && React.createElement(\"div\", {\n      ref: arrowRef,\n      style: Style.popupArrow\n    }, React.createElement(\"svg\", {\n      \"data-testid\": \"arrow\",\n      className: \"popup-arrow \" + (className !== '' ? className.split(' ').map(function (c) {\n        return c + \"-arrow\";\n      }).join(' ') : ''),\n      viewBox: \"0 0 32 16\",\n      style: _extends({\n        position: 'absolute'\n      }, arrowStyle)\n    }, React.createElement(\"path\", {\n      d: \"M16 0l16 16H0z\",\n      fill: \"currentcolor\"\n    }))), children && typeof children === 'function' ? children(closePopup, isOpen) : children);\n  };\n\n  var overlay = !(on.indexOf('hover') >= 0);\n  var ovStyle = isModal ? Style.overlay.modal : Style.overlay.tooltip;\n  var content = [overlay && React.createElement(\"div\", {\n    key: \"O\",\n    \"data-testid\": \"overlay\",\n    \"data-popup\": isModal ? 'modal' : 'tooltip',\n    className: \"popup-overlay \" + (className !== '' ? className.split(' ').map(function (c) {\n      return c + \"-overlay\";\n    }).join(' ') : ''),\n    style: _extends({}, ovStyle, overlayStyle, {\n      pointerEvents: closeOnDocumentClick && nested || isModal ? 'auto' : 'none'\n    }),\n    onClick: closeOnDocumentClick && nested ? closePopup : undefined,\n    tabIndex: -1\n  }, isModal && renderContent()), !isModal && renderContent()];\n  return React.createElement(React.Fragment, null, renderTrigger(), isOpen && ReactDOM.createPortal(content, getRootPopup()));\n});\nexport default Popup;\nexport { Popup };","map":{"version":3,"sources":["../src/hooks.tsx","../src/styles.ts","../src/Utils.ts","../src/index.tsx"],"names":["useOnEscape","active","useEffect","listener","event","handler","document","useRepositionOnResize","window","useOnClickOutside","refs","Array","contains","r","useTabbing","els","contentRef","focusableEls","firstFocusableEl","lastFocusableEl","useIsomorphicLayoutEffect","Style","popupContent","tooltip","position","zIndex","modal","margin","popupArrow","height","width","background","color","overlay","top","bottom","left","right","display","POSITION_TYPES","getCoordinatesForPosition","offsetX","offsetY","arrow","args","CenterTop","triggerBounding","CenterLeft","ContentBounding","transform","arrowTop","arrowLeft","getTooltipBoundary","boundingBox","innerHeight","selector","process","keepTooltipInside","calculatePosition","bestCoords","i","wrapperBox","positions","contentBox","popupIdCounter","getRootPopup","PopupRoot","Popup","forwardRef","trigger","onOpen","onClose","defaultOpen","open","undefined","disabled","nested","closeOnDocumentClick","repositionOnResize","closeOnEscape","on","contentStyle","arrowStyle","overlayStyle","className","lockScroll","mouseEnterDelay","mouseLeaveDelay","children","isOpen","setIsOpen","useState","triggerRef","useRef","arrowRef","focusedElBeforeOpen","popupId","isModal","timeOut","setPosition","focusContentOnOpen","lockScrolll","resetScroll","clearTimeout","openPopup","closePopup","setTimeout","togglePopup","onMouseEnter","onContextMenu","onMouseLeave","firstEl","useImperativeHandle","close","toggle","content","cords","renderTrigger","triggerProps","key","ref","current","onAsArray","len","comp","React","addWarperAction","popupContentStyle","styles","childrenElementProps","c","style","pointerEvents","onClick","e","renderContent","role","id","viewBox","d","fill","ovStyle","tabIndex","ReactDOM"],"mappings":"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","sourcesContent":["import { useEffect, RefObject, useLayoutEffect } from 'react';\n\nexport const useOnEscape = (handler: () => void, active = true) => {\n  useEffect(() => {\n    if (!active) return;\n    const listener = (event: any) => {\n      // check if key is an Escape\n      if (event.key === 'Escape') handler();\n    };\n    document.addEventListener('keyup', listener);\n\n    return () => {\n      if (!active) return;\n      document.removeEventListener('keyup', listener);\n    };\n  }, [handler, active]);\n};\n\nexport const useRepositionOnResize = (handler: () => void, active = true) => {\n  useEffect(() => {\n    if (!active) return;\n    const listener = () => {\n      handler();\n    };\n\n    window.addEventListener('resize', listener);\n\n    return () => {\n      if (!active) return;\n      window.removeEventListener('resize', listener);\n    };\n  }, [handler, active]);\n};\n\nexport const useOnClickOutside = (\n  ref: RefObject<HTMLElement> | RefObject<HTMLElement>[],\n  handler: () => void,\n  active = true\n) => {\n  useEffect(() => {\n    if (!active) return;\n    const listener = (event: any) => {\n      // Do nothing if clicking ref's element or descendent elements\n      const refs = Array.isArray(ref) ? ref : [ref];\n\n      let contains = false;\n      refs.forEach(r => {\n        if (!r.current || r.current.contains(event.target)) {\n          contains = true;\n          return;\n        }\n      });\n      event.stopPropagation();\n      if (!contains) handler();\n    };\n\n    document.addEventListener('mousedown', listener);\n    document.addEventListener('touchstart', listener);\n\n    return () => {\n      if (!active) return;\n      document.removeEventListener('mousedown', listener);\n      document.removeEventListener('touchstart', listener);\n    };\n  }, [ref, handler, active]);\n};\n\n// Make sure that user is not able TAB out of the Modal content on Open\nexport const useTabbing = (\n  contentRef: RefObject<HTMLElement>,\n  active = true\n) => {\n  useEffect(() => {\n    if (!active) return;\n    const listener = (event: any) => {\n      // check if key is an Tab\n      if (event.keyCode === 9) {\n        const els = contentRef?.current?.querySelectorAll(\n          'a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex=\"0\"]'\n        );\n\n        const focusableEls = Array.prototype.slice.call(els);\n        if (focusableEls.length === 1) {\n          event.preventDefault();\n          return;\n        }\n\n        const firstFocusableEl = focusableEls[0];\n        const lastFocusableEl = focusableEls[focusableEls.length - 1];\n        if (event.shiftKey && document.activeElement === firstFocusableEl) {\n          event.preventDefault();\n          lastFocusableEl.focus();\n        } else if (document.activeElement === lastFocusableEl) {\n          event.preventDefault();\n          firstFocusableEl.focus();\n        }\n      }\n    };\n\n    document.addEventListener('keydown', listener);\n\n    return () => {\n      if (!active) return;\n      document.removeEventListener('keydown', listener);\n    };\n  }, [contentRef, active]);\n};\n\nexport const useIsomorphicLayoutEffect =\n  typeof window !== 'undefined' ? useLayoutEffect : useEffect;\n","import React from 'react';\n\ntype PopupStyle = {\n  popupContent: {\n    tooltip: React.CSSProperties;\n    modal: React.CSSProperties;\n  };\n  popupArrow: React.CSSProperties;\n  overlay: {\n    tooltip: React.CSSProperties;\n    modal: React.CSSProperties;\n  };\n};\n\nconst Style: PopupStyle = {\n  popupContent: {\n    tooltip: {\n      position: 'absolute',\n      zIndex: 999,\n    },\n    modal: {\n      position: 'relative',\n      margin: 'auto',\n    },\n  },\n  popupArrow: {\n    height: '8px',\n    width: '16px',\n    position: 'absolute',\n    background: 'transparent',\n    color: '#FFF',\n    zIndex: -1,\n  },\n  overlay: {\n    tooltip: {\n      position: 'fixed',\n      top: '0',\n      bottom: '0',\n      left: '0',\n      right: '0',\n      zIndex: 999,\n    },\n    modal: {\n      position: 'fixed',\n      top: '0',\n      bottom: '0',\n      left: '0',\n      right: '0',\n      display: 'flex',\n      zIndex: 999,\n    },\n  },\n};\n\nexport default Style;\n","/* Algo to calculate position\n  1. center position for popup content : the center of the trigger will be the center of the content content\n      so the popup content position will be like this :\n      top => the y of the center for the trigger element : trigger.top + trigger.height/2\n      left => the x of the center for the trigger element : trigger.left + trigger.width/2\n\n  2. translate position according to the first  position attribute  passed  in the function argument\n      for example :\n        position = 'left top'\n        we need to handle the first argument in the position: 'left' => that's mean we need to translate the popup content according to the X axis by - content.width/2\n\n  3.translate position according to the first  position attribute  passed  in the function argument\n    for example :\n      position = 'left top'\n      the second argument 'top' => translate popup content by + content.height*4/5\n\n  4. check if calculated position is going out of bounds of wrapper box or not. If yes repeat 1-3 for next position enum. By default wrapper box is window element\n*/\nimport { PopupPosition } from './types';\n\nexport const POSITION_TYPES: PopupPosition[] = [\n  'top left',\n  'top center',\n  'top right',\n  'right top',\n  'right center',\n  'right bottom',\n  'bottom left',\n  'bottom center',\n  'bottom right',\n  'left top',\n  'left center',\n  'left bottom',\n  //'center center',\n];\n\ntype CordsType = {\n  top: number;\n  left: number;\n  transform: string;\n  arrowLeft: string;\n  arrowTop: string;\n};\n\nconst getCoordinatesForPosition = (\n  triggerBounding: DOMRect,\n  ContentBounding: DOMRect,\n  position: PopupPosition, //PopupPosition | PopupPosition[],\n  arrow: boolean,\n  { offsetX, offsetY }: { offsetX: number; offsetY: number }\n): CordsType => {\n  const margin = arrow ? 8 : 0;\n  const args = position.split(' ');\n  // the step N 1 : center the popup content => ok\n  const CenterTop = triggerBounding.top + triggerBounding.height / 2;\n  const CenterLeft = triggerBounding.left + triggerBounding.width / 2;\n  const { height, width } = ContentBounding;\n  let top = CenterTop - height / 2;\n  let left = CenterLeft - width / 2;\n  let transform = '';\n  let arrowTop = '0%';\n  let arrowLeft = '0%';\n  // the  step N 2 : => ok\n  switch (args[0]) {\n    case 'top':\n      top -= height / 2 + triggerBounding.height / 2 + margin;\n      transform = `rotate(180deg)  translateX(50%)`;\n      arrowTop = '100%';\n      arrowLeft = '50%';\n      break;\n    case 'bottom':\n      top += height / 2 + triggerBounding.height / 2 + margin;\n      transform = `rotate(0deg) translateY(-100%) translateX(-50%)`;\n      arrowLeft = '50%';\n      break;\n    case 'left':\n      left -= width / 2 + triggerBounding.width / 2 + margin;\n      transform = ` rotate(90deg)  translateY(50%) translateX(-25%)`;\n      arrowLeft = '100%';\n      arrowTop = '50%';\n      break;\n    case 'right':\n      left += width / 2 + triggerBounding.width / 2 + margin;\n      transform = `rotate(-90deg)  translateY(-150%) translateX(25%)`;\n      arrowTop = '50%';\n      break;\n    default:\n  }\n  switch (args[1]) {\n    case 'top':\n      top = triggerBounding.top;\n      arrowTop = `${triggerBounding.height / 2}px`;\n      break;\n    case 'bottom':\n      top = triggerBounding.top - height + triggerBounding.height;\n      arrowTop = `${height - triggerBounding.height / 2}px`;\n      break;\n    case 'left':\n      left = triggerBounding.left;\n      arrowLeft = `${triggerBounding.width / 2}px`;\n      break;\n    case 'right':\n      left = triggerBounding.left - width + triggerBounding.width;\n      arrowLeft = `${width - triggerBounding.width / 2}px`;\n      break;\n    default:\n  }\n\n  top = args[0] === 'top' ? top - offsetY : top + offsetY;\n  left = args[0] === 'left' ? left - offsetX : left + offsetX;\n\n  return { top, left, transform, arrowLeft, arrowTop };\n};\n\nexport const getTooltipBoundary = (keepTooltipInside: string | Boolean) => {\n  // add viewport\n  let boundingBox = {\n    top: 0,\n    left: 0,\n    /* eslint-disable-next-line no-undef */\n    width: window.innerWidth,\n    /* eslint-disable-next-line no-undef */\n    height: window.innerHeight,\n  };\n  if (typeof keepTooltipInside === 'string') {\n    /* eslint-disable-next-line no-undef */\n    const selector = document.querySelector(keepTooltipInside);\n    if (process.env.NODE_ENV !== 'production') {\n      if (selector === null)\n        throw new Error(\n          `${keepTooltipInside} selector does not exist : keepTooltipInside must be a valid html selector 'class' or 'Id'  or a boolean value`\n        );\n    }\n    if (selector !== null) boundingBox = selector.getBoundingClientRect();\n  }\n\n  return boundingBox;\n};\n\nconst calculatePosition = (\n  triggerBounding: DOMRect,\n  ContentBounding: DOMRect,\n  position: PopupPosition | PopupPosition[],\n  arrow: boolean,\n  { offsetX, offsetY }: { offsetX: number; offsetY: number },\n  keepTooltipInside: string | boolean\n): CordsType => {\n  let bestCoords: CordsType = {\n    arrowLeft: '0%',\n    arrowTop: '0%',\n    left: 0,\n    top: 0,\n    transform: 'rotate(135deg)',\n  };\n  let i = 0;\n  const wrapperBox = getTooltipBoundary(keepTooltipInside);\n  let positions = Array.isArray(position) ? position : [position];\n\n  // keepTooltipInside would be activated if the  keepTooltipInside exist or the position is Array\n  if (keepTooltipInside || Array.isArray(position))\n    positions = [...positions, ...POSITION_TYPES];\n\n  // add viewPort for WarpperBox\n  // wrapperBox.top = wrapperBox.top + window.scrollY;\n  // wrapperBox.left = wrapperBox.left + window.scrollX;\n\n  while (i < positions.length) {\n    bestCoords = getCoordinatesForPosition(\n      triggerBounding,\n      ContentBounding,\n      positions[i],\n      arrow,\n      { offsetX, offsetY }\n    );\n\n    const contentBox = {\n      top: bestCoords.top,\n      left: bestCoords.left,\n      width: ContentBounding.width,\n      height: ContentBounding.height,\n    };\n\n    if (\n      contentBox.top <= wrapperBox.top ||\n      contentBox.left <= wrapperBox.left ||\n      contentBox.top + contentBox.height >=\n        wrapperBox.top + wrapperBox.height ||\n      contentBox.left + contentBox.width >= wrapperBox.left + wrapperBox.width\n    ) {\n      i++;\n    } else {\n      break;\n    }\n  }\n\n  return bestCoords;\n};\n\nexport default calculatePosition;\n","import React, {\n  useState,\n  useRef,\n  useEffect,\n  forwardRef,\n  useImperativeHandle,\n} from 'react';\nimport ReactDOM from 'react-dom';\nimport { PopupProps, PopupActions } from './types';\nimport {\n  useOnEscape,\n  useRepositionOnResize,\n  useOnClickOutside,\n  useTabbing,\n  useIsomorphicLayoutEffect,\n} from './hooks';\n\nimport './index.css';\n\nimport styles from './styles';\nimport calculatePosition from './Utils';\n\nlet popupIdCounter = 0;\n\nconst getRootPopup = () => {\n  let PopupRoot = document.getElementById('popup-root');\n\n  if (PopupRoot === null) {\n    PopupRoot = document.createElement('div');\n    PopupRoot.setAttribute('id', 'popup-root');\n    document.body.appendChild(PopupRoot);\n  }\n\n  return PopupRoot;\n};\n\nexport const Popup = forwardRef<PopupActions, PopupProps>(\n  (\n    {\n      trigger = null,\n      onOpen = () => {},\n      onClose = () => {},\n      defaultOpen = false,\n      open = undefined,\n      disabled = false,\n      nested = false,\n      closeOnDocumentClick = true,\n      repositionOnResize = true,\n      closeOnEscape = true,\n      on = ['click'],\n      contentStyle = {},\n      arrowStyle = {},\n      overlayStyle = {},\n      className = '',\n      position = 'bottom center',\n      modal = false,\n      lockScroll = false,\n      arrow = true,\n      offsetX = 0,\n      offsetY = 0,\n      mouseEnterDelay = 100,\n      mouseLeaveDelay = 100,\n      keepTooltipInside = false,\n      children,\n    },\n    ref\n  ) => {\n    const [isOpen, setIsOpen] = useState<boolean>(open || defaultOpen);\n    const triggerRef = useRef<HTMLElement>(null);\n    const contentRef = useRef<HTMLElement>(null);\n    const arrowRef = useRef<HTMLDivElement>(null);\n    const focusedElBeforeOpen = useRef<Element | null>(null);\n    const popupId = useRef<string>(`popup-${++popupIdCounter}`);\n\n    const isModal = modal ? true : !trigger;\n    const timeOut = useRef<any>(0);\n\n    useIsomorphicLayoutEffect(() => {\n      if (isOpen) {\n        focusedElBeforeOpen.current = document.activeElement;\n        setPosition();\n        focusContentOnOpen(); // for accessibility\n        lockScrolll();\n      } else {\n        resetScroll();\n      }\n      return () => {\n        clearTimeout(timeOut.current);\n      };\n    }, [isOpen]);\n\n    // for uncontrolled popup we need to sync isOpen with open prop\n    useEffect(() => {\n      if (typeof open === 'boolean') {\n        if (open) openPopup();\n        else closePopup();\n      }\n    }, [open, disabled]);\n\n    const openPopup = () => {\n      if (isOpen || disabled) return;\n      setIsOpen(true);\n      setTimeout(onOpen, 0);\n    };\n\n    const closePopup = () => {\n      if (!isOpen || disabled) return;\n      setIsOpen(false);\n      if (isModal) (focusedElBeforeOpen.current as HTMLElement).focus();\n      setTimeout(onClose, 0);\n    };\n\n    const togglePopup = (event?: React.SyntheticEvent) => {\n      event?.stopPropagation();\n      if (!isOpen) openPopup();\n      else closePopup();\n    };\n\n    const onMouseEnter = () => {\n      clearTimeout(timeOut.current);\n      timeOut.current = setTimeout(openPopup, mouseEnterDelay);\n    };\n    const onContextMenu = (event?: React.SyntheticEvent) => {\n      event?.preventDefault();\n      togglePopup();\n    };\n\n    const onMouseLeave = () => {\n      clearTimeout(timeOut.current);\n      timeOut.current = setTimeout(closePopup, mouseLeaveDelay);\n    };\n    const lockScrolll = () => {\n      if (isModal && lockScroll)\n        document.getElementsByTagName('body')[0].style.overflow = 'hidden'; // migrate to document.body\n    };\n\n    const resetScroll = () => {\n      if (isModal && lockScroll)\n        document.getElementsByTagName('body')[0].style.overflow = 'auto';\n    };\n    const focusContentOnOpen = () => {\n      const focusableEls = contentRef?.current?.querySelectorAll(\n        'a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex=\"0\"]'\n      );\n      const firstEl = Array.prototype.slice.call(focusableEls)[0];\n      firstEl?.focus();\n    };\n\n    useImperativeHandle(ref, () => ({\n      open: () => {\n        openPopup();\n      },\n      close: () => {\n        closePopup();\n      },\n      toggle: () => {\n        togglePopup();\n      },\n    }));\n\n    // set Position\n    const setPosition = () => {\n      if (isModal || !isOpen) return;\n      if (!triggerRef?.current || !triggerRef?.current || !contentRef?.current)\n        return; /// show error as one of ref is undefined\n      const trigger = triggerRef.current.getBoundingClientRect();\n      const content = contentRef.current.getBoundingClientRect();\n\n      const cords = calculatePosition(\n        trigger,\n        content,\n        position,\n        arrow,\n        {\n          offsetX,\n          offsetY,\n        },\n        keepTooltipInside\n      );\n      contentRef.current.style.top = `${cords.top + window.scrollY}px`;\n      contentRef.current.style.left = `${cords.left + window.scrollX}px`;\n      if (arrow && !!arrowRef.current) {\n        arrowRef.current.style.transform = cords.transform;\n        arrowRef.current.style.setProperty('-ms-transform', cords.transform);\n        arrowRef.current.style.setProperty(\n          '-webkit-transform',\n          cords.transform\n        );\n        arrowRef.current.style.top =\n          arrowStyle.top?.toString() || cords.arrowTop;\n        arrowRef.current.style.left =\n          arrowStyle.left?.toString() || cords.arrowLeft;\n      }\n    };\n    // hooks\n    useOnEscape(closePopup, closeOnEscape); // can be optimized if we disabled for hover\n    useTabbing(contentRef, isOpen && isModal);\n    useRepositionOnResize(setPosition, repositionOnResize);\n    useOnClickOutside(\n      !!trigger ? [contentRef, triggerRef] : [contentRef],\n      closePopup,\n      closeOnDocumentClick && !nested\n    ); // we need to add a ne\n    // render the trigger element and add events\n    const renderTrigger = () => {\n      const triggerProps: any = {\n        key: 'T',\n        ref: triggerRef,\n        'aria-describedby': popupId.current,\n      };\n      const onAsArray = Array.isArray(on) ? on : [on];\n      for (let i = 0, len = onAsArray.length; i < len; i++) {\n        switch (onAsArray[i]) {\n          case 'click':\n            triggerProps.onClick = togglePopup;\n            break;\n          case 'right-click':\n            triggerProps.onContextMenu = onContextMenu;\n            break;\n          case 'hover':\n            triggerProps.onMouseEnter = onMouseEnter;\n            triggerProps.onMouseLeave = onMouseLeave;\n            break;\n          case 'focus':\n            triggerProps.onFocus = onMouseEnter;\n            triggerProps.onBlur = onMouseLeave;\n            break;\n          default:\n        }\n      }\n\n      if (typeof trigger === 'function') {\n        const comp = trigger(isOpen);\n        return !!trigger && React.cloneElement(comp, triggerProps);\n      }\n\n      return !!trigger && React.cloneElement(trigger, triggerProps);\n    };\n\n    const addWarperAction = () => {\n      const popupContentStyle = isModal\n        ? styles.popupContent.modal\n        : styles.popupContent.tooltip;\n\n      const childrenElementProps: any = {\n        className: `popup-content ${\n          className !== ''\n            ? className\n                .split(' ')\n                .map(c => `${c}-content`)\n                .join(' ')\n            : ''\n        }`,\n        style: {\n          ...popupContentStyle,\n          ...contentStyle,\n          pointerEvents: 'auto', //closeOnDocumentClick && nested ? 'auto' : 'none',\n        },\n        ref: contentRef,\n        onClick: (e: any) => {\n          e.stopPropagation();\n        },\n      };\n      if (!modal && on.indexOf('hover') >= 0) {\n        childrenElementProps.onMouseEnter = onMouseEnter;\n        childrenElementProps.onMouseLeave = onMouseLeave;\n      }\n      return childrenElementProps;\n    };\n\n    const renderContent = () => {\n      return (\n        <div\n          {...addWarperAction()}\n          key=\"C\"\n          role={isModal ? 'dialog' : 'tooltip'}\n          id={popupId.current}\n        >\n          {arrow && !isModal && (\n            <div ref={arrowRef} style={styles.popupArrow}>\n              <svg\n                data-testid=\"arrow\"\n                className={`popup-arrow ${\n                  className !== ''\n                    ? className\n                        .split(' ')\n                        .map(c => `${c}-arrow`)\n                        .join(' ')\n                    : ''\n                }`}\n                viewBox=\"0 0 32 16\"\n                style={{\n                  position: 'absolute',\n                  ...arrowStyle,\n                }}\n              >\n                <path d=\"M16 0l16 16H0z\" fill=\"currentcolor\" />\n              </svg>\n            </div>\n          )}\n          {children && typeof children === 'function'\n            ? children(closePopup, isOpen)\n            : children}\n        </div>\n      );\n    };\n\n    const overlay = !(on.indexOf('hover') >= 0);\n    const ovStyle = isModal ? styles.overlay.modal : styles.overlay.tooltip;\n\n    const content = [\n      overlay && (\n        <div\n          key=\"O\"\n          data-testid=\"overlay\"\n          data-popup={isModal ? 'modal' : 'tooltip'}\n          className={`popup-overlay ${\n            className !== ''\n              ? className\n                  .split(' ')\n                  .map(c => `${c}-overlay`)\n                  .join(' ')\n              : ''\n          }`}\n          style={{\n            ...ovStyle,\n            ...overlayStyle,\n            pointerEvents:\n              (closeOnDocumentClick && nested) || isModal ? 'auto' : 'none',\n          }}\n          onClick={closeOnDocumentClick && nested ? closePopup : undefined}\n          tabIndex={-1}\n        >\n          {isModal && renderContent()}\n        </div>\n      ),\n\n      !isModal && renderContent(),\n    ];\n\n    return (\n      <>\n        {renderTrigger()}\n        {isOpen && ReactDOM.createPortal(content, getRootPopup())}\n      </>\n    );\n  }\n);\n\nexport default Popup;\n"]},"metadata":{},"sourceType":"module"}